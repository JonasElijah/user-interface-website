<header>
    <nav class="navbar navbar-expand-lg custom-navbar shadow rounded">
        <div class="container-fluid">
            <a href="/index.php">
                <img class="site-logo" src="/assets/images/photography.png" alt="Photography Logo" style="max-width: 250px; max-height: 100px"/>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <?php
                    $current_page = basename($_SERVER['REQUEST_URI']);

                    // Log $current_page to the browser console

                    $nav_items = [
                        'index.php' => 'Home',
                        'gallery.php' => 'Gallery',
                        'cart/cart.php' => 'Cart',
                        'auth/login.php' => 'Login',
                        'auth/signup.php' => 'Signup',
                        'auth/account.php' => 'Account',
                        'auth/logout.php' => 'Logout'
                    ];

                    foreach ($nav_items as $page => $title) 
                    {
                        echo "<script>console.log('page: " . basename($page) . "');</script>";
                        echo "<script>console.log('Current page: " . $current_page . "');</script>";
                        if(!isset($_SESSION['userID']) && $page ==  'auth/account.php')
                        {
                            continue;
                        }

                        if(!isset($_SESSION['userID']) && $page ==  'auth/logout.php')
                        {
                            continue;
                        }

                        if(isset($_SESSION['userID']) && $page ==  'auth/login.php')
                        {
                            continue;
                        }

                        if(isset($_SESSION['userID']) && $page ==  'auth/signup.php')
                        {
                            continue;
                        }
                        


                        $active_class = strpos($current_page, basename($page)) !== false ? ' active' : '';
                        echo '<li class="nav-item">';
                        echo '<a class="nav-link' . $active_class . '" href="/' . $page . '">' . $title . '</a>';
                        echo '</li>';
                    }
                    ?>
                </ul>
            </div>
        </div>
    </nav>
</header>
